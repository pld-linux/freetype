--- freetype-2.5.1/ft2demos-2.5.1/src/ftgrid.c.orig	2013-11-21 16:56:59.920675040 +0100
+++ freetype-2.5.1/ft2demos-2.5.1/src/ftgrid.c	2013-11-27 20:29:23.464470407 +0100
@@ -53,10 +53,12 @@
   struct  AF_GlyphHintsRec_;
   typedef struct AF_GlyphHintsRec_*  AF_GlyphHints;
 
+#ifdef FT_DEBUG_AUTOFIT
   extern int            _af_debug_disable_horz_hints;
   extern int            _af_debug_disable_vert_hints;
   extern int            _af_debug_disable_blue_hints;
   extern AF_GlyphHints  _af_debug_hints;
+#endif
 
 #ifdef __cplusplus
   extern "C" {
@@ -495,19 +497,26 @@
     if ( status.do_segment )
     {
       /* Force hinting first in order to collect segment info. */
+#ifdef FT_DEBUG_AUTOFIT
       _af_debug_disable_horz_hints = 0;
       _af_debug_disable_vert_hints = 0;
+#endif
 
       if ( !FT_Load_Glyph( size->face, st->Num,
                            FT_LOAD_DEFAULT        |
                            FT_LOAD_NO_BITMAP      |
                            FT_LOAD_FORCE_AUTOHINT |
                            FT_LOAD_TARGET_NORMAL ) )
-        grid_hint_draw_segment( &status, _af_debug_hints );
+#ifdef FT_DEBUG_AUTOFIT
+        grid_hint_draw_segment( &status, _af_debug_hints )
+#endif
+		;
     }
 
+#ifdef FT_DEBUG_AUTOFIT
     _af_debug_disable_horz_hints = !st->do_horz_hints;
     _af_debug_disable_vert_hints = !st->do_vert_hints;
+#endif
 
     if ( FT_Load_Glyph( size->face, st->Num,
                         handle->load_flags | FT_LOAD_NO_BITMAP ) )
@@ -862,7 +871,9 @@
 
           ft_trace_levels[trace_afhints] = 7;
           status.header = "dumping glyph edges to stdout";
+#ifdef FT_DEBUG_AUTOFIT
           af_glyph_hints_dump_edges( _af_debug_hints );
+#endif
           ft_trace_levels[trace_afhints] = old_trace_level;
         }
         else
@@ -882,7 +893,9 @@
 
           ft_trace_levels[trace_afhints] = 7;
           status.header = "dumping glyph segments to stdout";
+#ifdef FT_DEBUG_AUTOFIT
           af_glyph_hints_dump_segments( _af_debug_hints );
+#endif
           ft_trace_levels[trace_afhints] = old_trace_level;
         }
         else
@@ -902,7 +915,9 @@
 
           ft_trace_levels[trace_afhints] = 7;
           status.header = "dumping glyph points to stdout";
+#ifdef FT_DEBUG_AUTOFIT
           af_glyph_hints_dump_points( _af_debug_hints );
+#endif
           ft_trace_levels[trace_afhints] = old_trace_level;
         }
         else
